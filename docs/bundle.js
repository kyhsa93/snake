(()=>{"use strict";class t extends Phaser.Scene{constructor(){super({key:t.name})}create(){this.add.rectangle(0,0,r.width,r.height,0,.8).setOrigin(0);const t=this.add.text(0,0,"Start Game",{fontSize:"32px",color:"#FFF"}).setOrigin(.5);t.setInteractive(),t.on("pointerdown",(()=>this.scene.start("GameScene"))),t.setPosition(r.width/2,r.height/2),this.cameras.main.centerOn(r.width/2,r.height/2)}}let s=0;function e(t){return Math.floor(t/a)*a}class i{constructor(t){this.scene=t,this.body=[],this.direction=Phaser.Math.Vector2.RIGHT,this.growAmount=0,this.moveDelay=150,this.lastMoveTime=0,this.alive=!0;const s=e(r.width/2),i=e(r.height/2),o=Phaser.Display.Color.RandomRGB().color32;for(let t=0;t<3;++t)this.body.push(this.scene.add.rectangle(s-t*a,i,a,a,o).setOrigin(0))}update(t){return t>=this.lastMoveTime+this.moveDelay&&(this.lastMoveTime=t,this.move())}move(){const t=this.body[0],s=t.x+this.direction.x*a,e=t.y+this.direction.y*a;if(s<0||s>=r.width||e<0||e>=r.height)return this.alive=!1,!1;for(let t=this.body.length-1;t>0;--t)if(this.body[t].x===s&&this.body[t].y===e)return this.alive=!1,!1;const i=this.body.pop();if(!i)throw new Error("Snake has empty body");if(i.setPosition(s,e),this.body.unshift(i),this.growAmount>0){const t=Phaser.Display.Color.RandomRGB().color32;this.body.push(this.scene.add.rectangle(i.x,i.y,a,a,t).setOrigin(0)),this.growAmount--}return!0}grow(){this.growAmount+=1}collideWithFood(t){return this.body[0].x===t.x&&this.body[0].y===t.y}}class o{constructor(t){this.scene=t,this.x=0,this.y=0,this.sprite=this.scene.add.rectangle(this.x,this.y,a,a,Phaser.Display.Color.RandomRGB().color32).setOrigin(0),this.randomize()}randomize(){const t=r.width/a-1,s=r.height/a-1;this.x=Math.floor(Math.random()*t)*a,this.y=Math.floor(Math.random()*s)*a,this.sprite.setFillStyle(Phaser.Display.Color.RandomRGB().color32),this.sprite.setPosition(this.x,this.y)}avoidOverlap(t){let s=!0;for(;s;)this.randomize(),s=t.body.some((t=>t.x===this.x&&t.y===this.y))}}class h extends Phaser.Scene{constructor(){super({key:"GameScene"})}create(){var t;this.cameras.main.setBounds(0,0,r.width,r.height),this.snake=new i(this),this.food=new o(this),this.cursors=null===(t=this.input.keyboard)||void 0===t?void 0:t.createCursorKeys(),this.scoreText=this.add.text(16,16,"Score: 0",{fontSize:"32px",color:"#FFF"}),this.cameras.main.setPosition((r.width-this.cameras.main.width)/2,(r.height-this.cameras.main.height)/2)}changeBackgroundColor(){const t=Phaser.Display.Color.RandomRGB().color32;this.cameras.main.setBackgroundColor(t)}update(t){var e;if(!(null===(e=this.snake)||void 0===e?void 0:e.alive))return;if(!this.cursors||!this.food)return;const{left:i,right:o,up:h,down:r}=this.cursors,{x:n,y:c}=this.snake.direction;var d;Phaser.Input.Keyboard.JustDown(i)&&n!==a?this.snake.direction=Phaser.Math.Vector2.LEFT:Phaser.Input.Keyboard.JustDown(o)&&n!==-a?this.snake.direction=Phaser.Math.Vector2.RIGHT:Phaser.Input.Keyboard.JustDown(h)&&c!==a?this.snake.direction=Phaser.Math.Vector2.UP:Phaser.Input.Keyboard.JustDown(r)&&c!==-a&&(this.snake.direction=Phaser.Math.Vector2.DOWN),this.snake.update(t)&&this.snake.collideWithFood(this.food)&&(this.snake.grow(),this.food.avoidOverlap(this.snake),this.scoreText&&(d=this.scoreText,s+=10,d.setText("Score: "+s)),this.changeBackgroundColor())}}const r={type:Phaser.AUTO,width:800,height:600,backgroundColor:"#222222",scene:[t,h]},a=16;new Phaser.Game(r)})();